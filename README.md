# Синхронний JAVA REST-клієнт з підтримкою системи «Трембіта»

## Опис клієнту

REST-клієнт, описаний в даній інструкції, розроблений мовою програмування Java з використанням фрейморка Springі є сумісним з системою «Трембіта».

Spring - це сучасний, швидкий (високопродуктивний) фреймворк для Java.

Даний клієнт передбачає отримання відомостей про інформаційні об’єкти (користувачів) та управління їх статусом, у тому числі відправку запитів на пошук, отримання, створення, редагування та видалення об’єктів до відповідного сервісу.

Додатково передбачено функції завантаження архівів з підписаними електронними повідомленнями-запитами та повідомленнями-відповідями у вигляді ASiC-контейнерів.

Для демонстрації інтеграції з системою «Трембіта» було розроблено [вебсервіс](https://github.com/MadCat-88/Trembita_J_R_SyncSrv) для роботи з даним вебклієнтом.

## Вимоги до програмного забезпечення
| ПЗ            |   Версія   | Примітка                                                                                                                                                                                           |
|:--------------|:----------:|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Ubuntu Server |   24.04    | Рекомендовані характеристики віртуальної машини:<br/> CPU: 1 <br/> RAM: 512 Мб                                                                                                                     |
| Java          |   **17+**  | За допомогою скрипта встановлюється автоматично.<br/> Також можна встановити вручну при виборі відповідного типу інсталяції.<br/>**Важливо!** Якщо версія Java нижче 17, сервіс працювати не буде. |
| PostgreSQL    |   14.12+   | За допомогою скрипта встановлюється автоматично.<br/> Також можна встановити вручну при виборі відповідного типу інсталяції                                                                        |
| Git           |            | Для клонування репозиторію                                                                                                                                                                         |

## Інсталяція клієнту

Клієнт можна інсталювати за допомогою скрипта автоматичного встановлення або вручну.

- [Інсталяція клієнту за допомогою скрипта автоматичного встановлення](./docs/script_installation.md).
- [Інсталяція клієнту вручну](./docs/manual_installation.md).
- [Конфігурація клієнту](./docs/configuration.md).

## Адміністрування клієнту

Для адміністрування вебклієнту було створено скрипт `springws-service.sh`.
За допомогою даного скрипта можна:
- створити файл системної служби типу systemd для запуску вебклієнту та додає його до автозапуску;
- запусти вебклієнт;
- зупинити вебклієнт;
- видалити вебклієнт.

Для виконання необхідної дії нобхідно:

1. Перейти в директорію з вебклієнтом:

```bash
cd SpringClientDemo/
```

2. Запустити скрипт:

```bash
sudo bash springws-service.sh
```

3. Ввести цифру необхідної дії (1,2,3 і тд).

**Примітка:** Після встановлення вебклієнту необхідно, за допомого скрипта, створити файл системної служби типу systemd для запуску вебклієнту.

### Доступ до вебклієнту

Для доступу до вебінтерфейсу вебклієнту необхідно перейти за посиланням: http://<your_server_ip>:8050

### Перевірка статусу вебклієнту

Для того, щоб перевірити статус вебклієнту необхідно виконати наступну команду:

```bash
sudo systemctl status springwc
```

### Перегляд журналу подій

За замовчуванням журнал подій зберігається у файлі `/tmp/client.log`.

Конфігурація параметрів журналювання подій виконується в файлі `/SpringClientDemo/config/config.properties`. Детальніше з параметрами журналювання в даному файлі можна ознайомитися в настановах з [конфігурування](./docs/configuration.md).

Для того, щоб переглянути журнал подій вебклієнту необхідно виконати команду:

```bash
journalctl -u springwc -f
```

### Налаштування HTTPS
Налаштуванню взаємного TLS-зʼєднання виконується згідно [інструкції](./docs/Як_увімкнути_взаємний_TLS_у_програмі_Spring_Boot.docx)

## Інтеграція вебклієнту з системою «Трембіта»

Для повноцінної інтеграції з системою «Трембіта» вебклієнт повинен мати можливість додавати до запиту HTTP заголовки, необхідні для передачі запитів між шлюзами безпечного обміну системи «Трембіта». Окрім цього для ідентифікації повідомлень в власній інформаційній системі вебклієнт для кожного запиту повинен задавати унікальний ідентифікатор з заголовком Uxp-queryID. Більш детальну інформацію про заголовки наведено в [описі роботи із REST-сервісами в системі «Трембіта»](https://github.com/MadCat-88/Services-development-for-Trembita-system/blob/main/REST%20services%20development%20for%20Trembita%20system.md#%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8-%D0%B7%D0%B0%D0%BF%D0%B8%D1%82%D1%96%D0%B2-%D0%B4%D0%BB%D1%8F-rest-%D1%81%D0%B5%D1%80%D0%B2%D1%96%D1%81%D1%96%D0%B2-%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D1%96%D0%B4%D0%BD%D1%96-%D0%B7%D0%B0%D0%B4%D0%BB%D1%8F-%D0%B7%D0%B0%D0%B1%D0%B5%D0%B7%D0%BF%D0%B5%D1%87%D0%B5%D0%BD%D0%BD%D1%8F-%D1%81%D1%83%D0%BC%D1%96%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%96-%D0%B7-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D1%8E-%D1%82%D1%80%D0%B5%D0%BC%D0%B1%D1%96%D1%82%D0%B0).

В даному вебклієнті конфігурування заголовків здійснюється в файлі конфігурації `config.properties` в директорії `/SpringClientDemo/config/`. Детальніше конфігурування заголовків описано в [настановах з конфігурування](./docs/configuration.md)

## Використання вебклієнту

Для доступу до вебінтерфейсу розробленого вебклієнту необхідно перейти за посиланням:

```
http://<your_server_ip>:8050
```

В даному інтерфейсі можна виконати наступні дії:
1.	Переглядати всі записи в БД.
2.	Здійснювати пошук записів в БД за певними параметрами.
3.	Створювати записи в БД.
4.	Модифікувати записи в БД.

**Важливо!** Обмеження сервісу – не можна міняти поле **rnokpp**!

4.	Видаляти записи в БД.
5.	В разі, якщо для зв’язку з ШБО системи «Трембіта» використовується HTTPS, буде доступна можливість завантажувати ASIC-контейнери з запитами від вебклієнта до вебсервісу, які були передані через даний ШБО.
6.	Завантажити сертифікат даного вебклієнту для взаємної автентифікації з ШБО. Дану дію можна виконати на вкладці «Сертифікати».


## Ліцензія
Цей проєкт ліцензується відповідно до умов MIT License.

##
Матеріали створено за підтримки проєкту міжнародної технічної допомоги «Підтримка ЄС цифрової трансформації України (DT4UA)».
